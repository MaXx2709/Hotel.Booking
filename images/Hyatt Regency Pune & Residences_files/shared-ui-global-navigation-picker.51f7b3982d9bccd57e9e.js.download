/*@license For license information please refer to shared-ui-global-navigation-picker.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3337],{53320:function(e,n,t){t.d(n,{cW:function(){return ee},pQ:function(){return B}});var r=t(67294),a=t(69430),l=t(71641),i=t(17563),o=t(95878),c=t(98250),u=t(73030),s=t(19633),d=t(41419),m=t(80463),f=t(13413),g=t(8315),v=t(46605),y=t(23984),p=t(91233),E=t(10333),b=t(32654),k=t(24499),h=t(97534),P=t(41913),S=t(34353),N=t(49349),_=t(93351),T=t(30300),I=t(79221),C=t(18397),O=t(5419);function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){x(e,n,t[n])}))}return e}function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l=[],i=!0,o=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==t.return||t.return()}finally{if(o)throw a}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function F(){var e=j(["\n  fragment CurrencySelectorFragment on CurrencySelector {\n    disabled\n    heading\n    queryParameterName\n    options {\n      name\n      selected\n      value\n    }\n    onChangeAnalytics {\n      linkName\n      referrerId\n    }\n  }\n"]);return F=function(){return e},e}function K(){var e=j(["\n  fragment LanguageSelectorFragment on LanguageSelector {\n    heading\n    queryParameterName\n    options {\n      name\n      selected\n      value\n    }\n    onChangeAnalytics {\n      linkName\n      referrerId\n    }\n  }\n"]);return K=function(){return e},e}function M(){var e=j(["\n  fragment PosSelectorFragment on PosSelector {\n    heading\n    options {\n      name\n      selected\n      value\n    }\n    onChangeAnalytics {\n      linkName\n      referrerId\n    }\n  }\n"]);return M=function(){return e},e}function D(){var e=j(["\n  fragment OneKeyMessagingFragment on Picker {\n    oneKeyMessagingHeading\n    oneKeyMessagingSubHeading\n  }\n"]);return D=function(){return e},e}function z(){var e=j(["\n  query LocalePreferencesQuery(\n    $context: ContextInput!\n    $lineOfBusiness: GlobalNavigationLineOfBusiness\n    $pickerTriggerPlacementType: PickerTriggerPlacementType\n    $selectedSiteId: Int\n  ) {\n    localePreferences(\n      context: $context\n      lineOfBusiness: $lineOfBusiness\n      pickerTriggerPlacementType: $pickerTriggerPlacementType\n      selectedSiteId: $selectedSiteId\n    ) {\n      heading\n      closeDialogText\n      submitText\n      bannerText\n      ...OneKeyMessagingFragment\n      urlToSubmit\n      queryParamsToSubmit {\n        key\n        value\n      }\n      trigger {\n        iconName\n        text\n        flagName\n        trackingEvent\n        displayType\n      }\n      preferences {\n        __typename\n        ...CurrencySelectorFragment\n        ...LanguageSelectorFragment\n        ...PosSelectorFragment\n      }\n      impressionAnalytics {\n        linkName\n        referrerId\n      }\n      saveAnalytics {\n        linkName\n        referrerId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return z=function(){return e},e}var B=function(e){return e.MENU_ITEM="MENU_ITEM",e.NAV_LINK="NAV_LINK",e}(B||{}),R=/\{value\}/g,V=function(e,n){var t=n.replace(/\s/,"");return e.replace(R,t)},$=(0,a.Ps)(F()),q=function(e){var n,t=e.data,a=e.updateQueryParams,l=t.disabled,i=t.heading,o=t.queryParameterName,u=t.options,s=t.onChangeAnalytics,d=u.find((function(e){return!0===e.selected})),m=w(r.useState((null===(n=d)||void 0===n?void 0:n.value)||""),2),f=m[0],g=m[1],v=(0,c.useClickTracker)();r.useEffect((function(){var e;return g((null===(e=d)||void 0===e?void 0:e.value)||"")}),[d]);return u.length?r.createElement(C.e,{id:"currency-selector",label:i,value:f,onChange:function(e){var n,t,r,l,i,c=e.target.value,u=(null===(n=s)||void 0===n?void 0:n.referrerId)?V(null===(t=s)||void 0===t?void 0:t.referrerId,c):"";v(u,null!==(i=null===(r=s)||void 0===r?void 0:r.linkName)&&void 0!==i?i:""),g(c),a(o,c,(null===(l=d)||void 0===l?void 0:l.value)||null)},disabled:l},u.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)}))):null};q.displayName="CurrencySelector",(q.fragment=$).__typename="CurrencySelector";var U=(0,a.Ps)(K()),H=function(e){var n,t=e.data,a=e.updateQueryParams,l=t.heading,i=t.options,o=t.queryParameterName,u=t.onChangeAnalytics,s=i.find((function(e){return!0===e.selected})),d=w(r.useState((null===(n=s)||void 0===n?void 0:n.value)||""),2),m=d[0],f=d[1],g=(0,c.useClickTracker)();r.useEffect((function(){var e;return f((null===(e=s)||void 0===e?void 0:e.value)||"")}),[s]);return i.length?r.createElement(C.e,{id:"language-selector",label:l,value:m,onChange:function(e){var n,t,r,l,c,d=e.target.options.selectedIndex,m=i[d].name,v=(null===(n=u)||void 0===n?void 0:n.referrerId)?V(null===(t=u)||void 0===t?void 0:t.referrerId,m):"";g(v,null!==(c=null===(r=u)||void 0===r?void 0:r.linkName)&&void 0!==c?c:"");var y=e.target.value;f(y),a(o,y,(null===(l=s)||void 0===l?void 0:l.value)||null)}},i.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)}))):null};H.displayName="LanguageSelector",(H.fragment=U).__typename="LanguageSelector";var Q=(0,a.Ps)(M()),G=function(e){var n,t=e.refetch,a=e.data,l=a.heading,i=a.options,o=a.onChangeAnalytics,u=i.find((function(e){return!0===e.selected})),s=w(r.useState((null===(n=u)||void 0===n?void 0:n.value)||""),2),d=s[0],m=s[1],f=(0,c.useClickTracker)();return i.length?r.createElement(C.e,{id:"site-selector","data-stid":"site-selector",label:l,value:d,onChange:function(e){var n,r,a,l,c=e.target.options.selectedIndex,u=i[c].name,s=(null===(n=o)||void 0===n?void 0:n.referrerId)?V(null===(r=o)||void 0===r?void 0:r.referrerId,u):"";f(s,null!==(l=null===(a=o)||void 0===a?void 0:a.linkName)&&void 0!==l?l:"");var d=e.target.value;m(d),t({selectedSiteId:Number(d)})}},i.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)}))):null};G.displayName="PosSelector",(G.fragment=Q).__typename="PosSelector";var W=(0,a.Ps)(D()),Y=function(e){var n=e.data,t=n.oneKeyMessagingHeading,a=n.oneKeyMessagingSubHeading;return r.createElement(r.Fragment,null,t&&r.createElement(_.l,{padding:{inline:"four",blockstart:"six"}},r.createElement(y.v,null,r.createElement(p.t,null,r.createElement(_.l,{margin:{inlinestart:"two",inlineend:"three"}},r.createElement(v.fR,{name:"warning"}))),r.createElement(p.t,null,r.createElement("div",{"data-stid":"picker-one-key-heading"},r.createElement(O.y,{size:6},t))))),a&&r.createElement(_.l,{padding:{inline:"six",blockstart:"six"}},r.createElement("div",{"data-stid":"picker-one-key-subheading"},r.createElement(T.b,{size:400},a))))};Y.displayName="OneKeyMessaging",Y.fragment=W;var Z=(0,a.Ps)(z(),q.fragment,H.fragment,G.fragment,Y.fragment),J=[q,H,G],X=function(e){var n=e.content;return r.createElement(d.j,{fullWidth:!0},r.createElement(_.l,{padding:{block:"one"}},r.createElement(y.v,{alignItems:"center",space:"two"},r.createElement(p.t,null,r.createElement(_.l,{margin:{inlinestart:"four",inlineend:"six"}},r.createElement(v.fR,{name:"info_outline"}))),r.createElement(p.t,null,r.createElement("div",{"data-stid":"picker-banner-text"},r.createElement(T.b,null,n))))))},ee=function(e){var n,t,a,d=e.skipSsr,p=e.lineOfBusiness,T=e.pickerTriggerPlacementType,C={context:(0,o.v)().context,lineOfBusiness:p,pickerTriggerPlacementType:T},O=(0,l.a)(Z,{variables:C,ssr:!d}),A=O.data,x=O.error,j=O.loading,F=O.refetch,K=O.networkStatus,M=w((0,u.useDialog)("disp-settings-picker"),3),D=M[0],z=M[1],B=M[2],R=r.useRef(null),V=(0,c.useClickTracker)(),$=r.useCallback((function(){z.closeDialog()}),[z]),q={},U=function(e,n,t){n===t?delete q[e]:q[e]=n},H=function(){var e,n,t,r,a,l,o;z.closeDialog();var c,u=null===(n=A)||void 0===n||null===(e=n.localePreferences)||void 0===e?void 0:e.saveAnalytics;(null===(t=u)||void 0===t?void 0:t.referrerId)&&V(u.referrerId,(null===(c=u)||void 0===c?void 0:c.linkName)||"Picker button");var s=null===(a=A)||void 0===a||null===(r=a.localePreferences)||void 0===r?void 0:r.urlToSubmit,d=(null===(o=A)||void 0===o||null===(l=o.localePreferences)||void 0===l?void 0:l.queryParamsToSubmit)||[],m={};d.forEach((function(e){m[e.key]=e.value}));var f=Object.keys(d).length>0,g=Object.keys(q).length>0;if(s||f||g)if(s){var v=i.stringify(L({},m,q));window.location.href=v?"".concat(s,"?").concat(v):s}else{var y=i.parse(window.location.search),p=i.stringify(L({},y,m,q));window.location.search=p}};if(j&&!(2===K||4===K)||x||!A)return null;var Q=A.localePreferences,G=Q.preferences,W=Q.trigger,ee=Q.heading,ne=Q.closeDialogText,te=Q.submitText,re=Q.bannerText,ae=Q.impressionAnalytics;if(!G||!G.length)return null;var le,ie,oe=function(){V(W.trackingEvent,""),z.toggleDialog()},ce=r.createElement(y.v,{space:"two"},W.iconName&&r.createElement(v.fR,{name:W.iconName,size:v.eZ.SMALL}),W.text,W.flagName&&r.createElement(b.t,{name:W.flagName})),ue=r.createElement(P.U,{isVisible:D},r.createElement(B,null,r.createElement(s.Viewport,null,r.createElement(s.ViewSmall,null,r.createElement(S.K,{isVisible:D,returnFocusOnClose:!0,type:"full",triggerRef:R},r.createElement(I.b,{toolbarTitle:ee,key:"picker-dialog-toolbar",navigationContent:{onClick:$,navIconLabel:ne,navType:"close"}}),re&&r.createElement(X,{content:re}),r.createElement(Y,{data:A.localePreferences}),r.createElement(N.z,null,G.map((function(e){if(!e)return null;var n=J.find((function(n){return n.fragment.__typename===e.__typename}));return n?r.createElement(_.l,{margin:{block:"three"},key:"selector-".concat(e.__typename)},r.createElement("div",null,r.createElement(n,{refetch:F,data:e,updateQueryParams:U}))):null})),r.createElement(k.o,{type:h.k.BUTTON},r.createElement(m.t,{isFullWidth:!0,size:f.xY.LARGE,onClick:H},te))))),r.createElement(s.ViewLarge,null,r.createElement(S.K,{isVisible:D,returnFocusOnClose:!0,type:"centered",centeredSheetSize:"small",triggerRef:R},r.createElement(I.b,{toolbarTitle:ee,key:"picker-dialog-toolbar",navigationContent:{onClick:$,navIconLabel:ne,navType:"close"}}),re&&r.createElement(X,{content:re}),r.createElement(Y,{data:A.localePreferences}),r.createElement(N.z,null,G.map((function(e){if(!e)return null;var n=J.find((function(n){return n.fragment.__typename===e.__typename}));return n?r.createElement(_.l,{margin:{block:"three"},key:"selector-".concat(e.__typename)},r.createElement("div",null,r.createElement(n,{refetch:F,data:e,updateQueryParams:U}))):null})),r.createElement(m.t,{isFullWidth:!0,size:f.xY.LARGE,onClick:H},te)))))));return r.createElement(r.Fragment,null,"GLOBAL_NAV_LINK"===W.displayType?r.createElement(_.l,{padding:{block:"three",inline:"six"}},r.createElement(E.M,{className:"uitk-list-item",onClick:oe,"data-stid":"link-type-picker-trigger",domRef:R},r.createElement("button",{type:"button"},ce))):r.createElement(g.m,{className:"global-navigation-nav-button",onClick:oe,"data-stid":"button-type-picker-trigger",domRef:R},ce),D&&((null===(n=ae)||void 0===n?void 0:n.referrerId)?r.createElement(c.IntersectionTracker,{referrerId:null!==(le=null===(t=ae)||void 0===t?void 0:t.referrerId)&&void 0!==le?le:"",linkName:null!==(ie=null===(a=ae)||void 0===a?void 0:a.linkName)&&void 0!==ie?ie:""},ue):ue))};ee.displayName="sharedui-Picker"}}]);
//# sourceMappingURL=shared-ui-global-navigation-picker.51f7b3982d9bccd57e9e.js.map