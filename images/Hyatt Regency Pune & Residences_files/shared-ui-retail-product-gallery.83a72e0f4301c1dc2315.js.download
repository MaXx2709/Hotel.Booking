/*@license For license information please refer to shared-ui-retail-product-gallery.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3701],{95358:function(e,n,t){t.d(n,{L:function(){return Ee}});var a=t(67294),l=t(69430),r=t(71641),i=t(95878),o=t(81383),c=t(73030),u=t(19633),d=t(73160),m=t(98250),g=t(64418),s=t(83387),v=t(6062),y=t(34319),f=t(17663),p=t(61734),I=t(96849),b=t(15980),h=t(74028),E=t(24136),k=t(59399),C=t(59265),P=t(35830),T=t(23780),_=t(54513),S=t(78974);function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function G(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){x(e,n,t[n])}))}return e}function O(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function D(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}function L(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,l,r=[],i=!0,o=!1;try{for(t=t.call(e);!(i=(a=t.next()).done)&&(r.push(a.value),!n||r.length!==n);i=!0);}catch(c){o=!0,l=c}finally{try{i||null==t.return||t.return()}finally{if(o)throw l}}return r}}(e,n)||H(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function A(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,n){if(e){if("string"==typeof e)return w(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,n):void 0}}function N(){var e=M(["\n  fragment GalleryButtonsFragment on ProductImageGallery {\n    galleryButtons {\n      accessibility\n      icon {\n        id\n      }\n      action {\n        resource {\n          value\n        }\n      }\n    }\n  }\n"]);return N=function(){return e},e}function V(){var e=M(["\n  fragment PropertyImageFragment on ProductImageInfo {\n    image {\n      url\n      description\n      analytics {\n        linkName\n        referrerId\n      }\n    }\n    lowResImage {\n      url\n    }\n    analytics {\n      trackingId\n      imageId\n      subjectId\n    }\n  }\n"]);return V=function(){return e},e}function F(){var e=M(["\n  fragment CarouselContainerFragment on ProductImageGallery {\n    accessibilityLabel\n    categoryIdAll\n    categorizedImages {\n      accessibilityLabel\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    ...GalleryButtonsFragment\n  }\n\n  ","\n  ","\n"]);return F=function(){return e},e}function R(){var e=M(["\n  fragment MosaicContainerFragment on ProductImageGallery {\n    accessibilityLabel\n    categorizedImages {\n      accessibilityLabel\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    ...GalleryButtonsFragment\n  }\n\n  ","\n  ","\n"]);return R=function(){return e},e}function j(){var e=M(["\n  fragment MediaGalleryDialogFragment on ProductImageGallery {\n    categorizedImages {\n      categoryId\n      categoryName\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    mediaGalleryDialog {\n      toolbar {\n        icon {\n          id\n          description\n        }\n      }\n    }\n  }\n  ","\n"]);return j=function(){return e},e}function z(){var e=M(["\n  fragment ThumbnailGalleryDialogFragment on ProductImageGallery {\n    categorizedImages {\n      categoryId\n      categoryName\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    thumbnailGalleryDialog {\n      toolbar {\n        title\n        icon {\n          id\n          description\n        }\n      }\n      trigger {\n        accessibilityLabel\n        value\n      }\n    }\n  }\n  ","\n"]);return z=function(){return e},e}function U(){var e=M(["\n  fragment ProductGalleryImageContainerFragment on ProductImageGallery {\n    ...MosaicContainerFragment\n    ...CarouselContainerFragment\n    ...MediaGalleryDialogFragment\n    ...ThumbnailGalleryDialogFragment\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return U=function(){return e},e}function X(){var e=M(["\n  query ProductGalleryQuery($context: ContextInput!, $productIdentifier: ProductIdentifierInput!) {\n    productGallery(context: $context, productIdentifier: $productIdentifier) {\n      ...ProductGalleryImageContainerFragment\n    }\n  }\n\n  ","\n"]);return X=function(){return e},e}var B=function(e,n,t){return t.includes("clickRight")?e<n-1?e+1:0:t.includes("clickLeft")?e>0?e-1:n-1:e};function Y(e,n,t,a,l,r,i){var o,c=Date.now().toString(),u=[{schemaName:"allHotelProducts",messageContent:{hotelProducts:[G({imageGalleryAlgorithm:{name:"heroaesthetics.v20190411-hsc.v20190223"},algoMediaGuid:n},l?{productId:Number(l)}:{},a?{imageId:a}:{})]}},{schemaName:"imageTracking",messageContent:{galleryName:r,galleryType:"GALLERY_TYPE_SINGLE",galleryMaxPosition:t,galleryPosition:e,repeatedGalleryIndex:null,imageGalleryMetaTagList:[{imageGalleryMetaTagValue:c,imageGalleryMetaTagType:"DEVICE_TIME_STAMP"}]}}];return i&&(null===(o=u[1])||void 0===o?void 0:o.messageContent.imageGalleryMetaTagList)&&u[1].messageContent.imageGalleryMetaTagList.push({imageGalleryMetaTagValue:i,imageGalleryMetaTagType:"GALLERY_FILTER"}),u}function $(e){return e.map((function(e){var n,t,a,l,r;return{src:null!==(a=e.image.url)&&void 0!==a?a:"",caption:null!==(l=null===(n=e.image)||void 0===n?void 0:n.description)&&void 0!==l?l:"",alt:null!==(r=null===(t=e.image)||void 0===t?void 0:t.description)&&void 0!==r?r:""}}))}function K(e){return e.map((function(e){var n,t,a,l,r,i;return{src:null!==(l=e.image.url)&&void 0!==l?l:"",caption:null!==(r=e.image.description)&&void 0!==r?r:"",alt:null!==(i=e.image.description)&&void 0!==i?i:"",thumbnailClickAnalytics:null===(n=e.image)||void 0===n?void 0:n.analytics,trackingId:(null===(t=e.analytics)||void 0===t?void 0:t.trackingId)||null,imageId:(null===(a=e.analytics)||void 0===a?void 0:a.imageId)||null}}))}var W=(0,l.Ps)(N()),Z={position:{zindex:"layer2",bottom:"three",right:"three"},type:"absolute"},q=function(e){var n,t=e.data,l=e.onThumbnailGalleryClick,r=e.onVirtualTourClick,i=e.thumbnailButtonText,o=e.thumbnailDialogTriggerAccessibilityLabel,c=t.galleryButtons,u=(0,m.useClickTracker)(),d=a.useCallback((function(e){var n,t,a;if(null===(a=c)||void 0===a||null===(t=a[e])||void 0===t||null===(n=t.action)||void 0===n?void 0:n.resource){var l,i,o,u,d=(null===(u=c)||void 0===u||null===(o=u[e])||void 0===o||null===(i=o.action)||void 0===i||null===(l=i.resource)||void 0===l?void 0:l.value)||"";r(d)}}),[c,r]),g=a.useMemo((function(){return{id:"HOT.HIS.PhotoGalleryTrigger",description:"Open Room Gallery dialog",callback:function(e,n){return u(e,n)}}}),[u]);return a.createElement(f.Y8,G({},Z),a.createElement(y.lu,{space:"two",wrap:"nowrap"},null===(n=c)||void 0===n?void 0:n.map((function(e,n){var t,l;return a.createElement(s.fF,{key:"gallery-mosaic-action-".concat(null===(t=e.icon)||void 0===t?void 0:t.id),"aria-label":"gallery-mosaic-action",onClick:function(){return d(n)}},a.createElement(v.nn,{name:(null===(l=e.icon)||void 0===l?void 0:l.id)||"",id:"gallery-mosaic-action-trigger"}),e.accessibility)})),a.createElement(s.fF,{"aria-label":o||"",onClick:l,analytics:g},a.createElement(v.nn,{name:"photo_library",id:"gallery-mosaic-thumbnail-trigger"}),i)))};q.displayName="GalleryButtons",q.fragment=W;var Q=function(e){var n,t,l,r,i=e.imageIndex,o=e.images,c=e.propertyId,u=e.children;return a.createElement(m.IntersectionTracker,{tag:"span",referrerId:"HOT.HIS.MosaicTileImageImpression.".concat(i),linkName:"Mosaic Tile Image Impression",trackOnce:!0,additionalUisPrimeMicroMessages:Y(i,null===(t=o[i])||void 0===t||null===(n=t.analytics)||void 0===n?void 0:n.trackingId,o.length,null===(r=o[i])||void 0===r||null===(l=r.analytics)||void 0===l?void 0:l.imageId,c,"PDP_MOSAIC")},u)},J=(0,l.Ps)(V()),ee=function(e){var n,t,l,r=e.data,i=e.onClick,o=e.index,c=e.className,u=e.fetchPriority,d=e.galleryLength,s=e.propertyId,v=D(e,["data","onClick","index","className","fetchPriority","galleryLength","propertyId"]),y=r.image,f=r.lowResImage,I=r.analytics||{},b=I.trackingId,h=I.imageId,E=null===(n=y)||void 0===n?void 0:n.analytics,k=(0,m.useClickTracker)(),C=L(a.useState(!1),2),P=C[0],T=C[1],_=a.useCallback((function(){var e,n;E&&k(null===(e=E)||void 0===e?void 0:e.referrerId,null===(n=E)||void 0===n?void 0:n.linkName);i(o),T(!0)}),[i,o,E]),S=a.createElement(g.Experiment,{name:"PDP_gallery_category_grouping_optimisation",logExposure:P},a.createElement(g.ExperimentControl,null,a.createElement(p.xH,{alt:null!==(l=y.description)&&void 0!==l?l:"",placeholderImage:!0,src:(null===(t=f)||void 0===t?void 0:t.url)?f.url:y.url,additionalProps:{fetchPriority:u}}),a.createElement(p.CS,null,a.createElement("button",{onClick:_,type:"button"},a.createElement("span",{className:"is-visually-hidden"},y.description)))),a.createElement(g.ExperimentVariant,{bucket:1}));return a.createElement(p.A1,O(G({},v),{className:c,ratio:p.zT.R16_9}),E?a.createElement(m.IntersectionTracker,{trackOnce:!0,referrerId:"HOT.HIS.MosaicTileImageImpression.".concat(o),linkName:"Mosaic Tile Image Impression",additionalUisPrimeMicroMessages:Y(o,b,d,h,s,"PDP_MOSAIC")},S):S)};ee.displayName="PropertyImage",ee.fragment=J;var ne=(0,l.Ps)(F(),q.fragment,ee.fragment),te=function(e){var n,t,l,r,i=e.data,o=e.allImages,c=e.onImageClick,u=e.onVirtualTourClick,s=e.onTriggerClick,v=e.imageIndexState,y=e.propertyId,f=i.galleryButtons,p=i.accessibilityLabel,I=(0,m.useClickTracker)(),b=L(a.useState(!1),2),h=b[0],E=b[1],k=L(a.useState(!1),2),C=(k[0],k[1]),P=L(v,2),T=P[0],_=P[1],S=a.useMemo((function(){return{id:"HOT.HIS.Main",description:"Change image in gallery carousel",callback:function(e,n){var t,a=B(T,o.length,e),l=(null===(t=o[a])||void 0===t?void 0:t.analytics)||{},r=l.trackingId,i=l.imageId;I(e,n,void 0,Y(a,r,o.length,i,y,"PDP_MOSAIC"))}}}),[I]),w=a.useCallback((function(e){_(e),E(!0)}),[_,E]),x=a.useCallback((function(){var e,n,t,a,l,r,i,u,d=o[T],m=null===(n=d)||void 0===n||null===(e=n.image)||void 0===e?void 0:e.analytics;m&&I(null===(i=m)||void 0===i?void 0:i.referrerId,null===(u=m)||void 0===u?void 0:u.linkName);I("HOT.HIS.LaunchMainPhotoGallery","Launch Photo Gallery From Image Click",void 0,Y(T,null===(a=d)||void 0===a||null===(t=a.analytics)||void 0===t?void 0:t.trackingId,o.length,null===(r=d)||void 0===r||null===(l=r.analytics)||void 0===l?void 0:l.imageId,y,"PDP_MOSAIC")),c(),E(!0),C(!0)}),[I,c]),G=a.useCallback((function(){I("HOT.HIS.PhotoGalleryTrigger","Open Room Gallery dialog"),s(),E(!0)}),[I,s]),O=null===(n=f)||void 0===n?void 0:n.find((function(e){var n,t;return null===(t=e.action)||void 0===t||null===(n=t.resource)||void 0===n?void 0:n.value})),D=a.useCallback((function(){var e;(null===(e=O)||void 0===e?void 0:e.action)&&u(O.action.resource.value)}),[u,O]),M=a.useMemo((function(){return $(o)}),[o]);(null===(t=O)||void 0===t?void 0:t.accessibility)&&(l={virtualTourButton:null===(r=O)||void 0===r?void 0:r.accessibility});var A=a.createElement(Q,{propertyId:y,images:o,imageIndex:T},a.createElement(d.A7,{carouselId:"property-details-carousel",allyHeadingLevel:2,analytics:S,allyHeadingText:p||"",buttonText:l,carouselName:"PhotoGallery",images:M,onImageClick:x,onIndexChange:w,showGalleryButton:!0,showVirtualTourButton:Boolean(O),onMediaButtonClick:G,onVirtualTourClick:D,currentIndex:T,enablePreload:!1,fetchPriority:"high"}));return a.createElement(g.Experiment,{name:"mWeb_PDP_Full_image_gallery_ranking_algorithm_with_new_scene_classifier",logExposure:h},a.createElement(g.ExperimentControl,null,A),a.createElement(g.ExperimentVariant,{bucket:1}))};te.displayName="CarouselContainer",te.fragment=ne;var ae=(0,l.Ps)(R(),q.fragment,ee.fragment);var le=function(e){var n,t=e.data,l=e.allImages,r=e.imagesToShow,i=e.onVirtualTourClick,o=e.onImageClick,c=e.onTriggerClick,u=(e.thumbnailDialogTriggerTitle,e.thumbnailDialogTriggerAccessibilityLabel),d=e.propertyId,s=t.accessibilityLabel,v=(0,g.useExperiment)("Unified_gallery_photo_counter_for_desktop_and_tabweb"),y=v.exposure,p=v.logExperiment;l.length>1&&p(y);var b=(0,m.useClickTracker)(),h=a.useMemo((function(){var e=l.slice(0,r);return e.length%2==0&&e.pop(),e}),[l,r]),E=a.useCallback((function(e){var n,t=(null===(n=h[e])||void 0===n?void 0:n.analytics)||{},a=t.trackingId,l=t.imageId;b("HOT.HIS.ClickMosaicTileImage.".concat(e),"Property mosaic tile image click",void 0,Y(e,a,h.length,l,d,"PDP_MOSAIC")),b("HOT.HIS.LaunchMainPhotoGallery","Launch Photo Gallery From Image Click"),o(e)}),[b,o]),k=function(e){switch(e){case 5:return 4;case 3:return 3;default:return 1}}(h.length),C=1===y.bucket?"".concat(l.length):"".concat(l.length-1,"+"),P=1===l.length?"1":C;return a.createElement(f.Y8,{type:"relative"},a.createElement(I.PX,{columns:k,rows:2,space:"half"},a.createElement("meta",{itemProp:"image",content:null===(n=h[0])||void 0===n?void 0:n.image.url}),a.createElement("h2",{className:"is-visually-hidden"},s),h.map((function(e,n){return a.createElement(I.UX,{key:"mosaic-image-".concat(n),colSpan:0===n?2:1,rowSpan:0===n?2:1},a.createElement(ee,{data:e,onClick:E,index:n,fetchPriority:0===n?"high":void 0,galleryLength:r,propertyId:d}))})),a.createElement(q,{data:t,onThumbnailGalleryClick:c,onVirtualTourClick:i,thumbnailButtonText:P,thumbnailDialogTriggerAccessibilityLabel:u})))};le.fragment=ae,le.displayName="MosaicContainer";var re=(0,l.Ps)(j(),ee.fragment),ie=function(e){var n,t=e.data,l=e.allImages,r=e.isDialogOpen,i=e.onDialogDismiss,o=e.imageIndexState,c=e.categoryImageIndexState,u=e.categoryIndexState,d=e.propertyId,g=t.categorizedImages,s=t.mediaGalleryDialog,v=L(o,2),y=v[0],f=v[1],p=L(c,2),I=p[0],h=p[1],E=L(u,1)[0],k=(0,m.useClickTracker)(),C=a.useMemo((function(){var e;return $(E<0?l:(null===(e=g?g[E]:null)||void 0===e?void 0:e.images)||[])}),[E,g,l]),P=a.useMemo((function(){var e,n,t,a,l,r;return{type:null===(t=s)||void 0===t||null===(n=t.toolbar)||void 0===n||null===(e=n.icon)||void 0===e?void 0:e.id,navIconLabel:null===(r=s)||void 0===r||null===(l=r.toolbar)||void 0===l||null===(a=l.icon)||void 0===a?void 0:a.description}}),[s]),T=a.useMemo((function(){return{id:"HOT.HIS.PhotoGalleryTrigger",description:"Change image in media gallery",callback:function(e,n){var t,a,r,i=B(I,C.length,e),o=(null===(r=((null===(a=g)||void 0===a||null===(t=a[E])||void 0===t?void 0:t.images)||l)[i])||void 0===r?void 0:r.analytics)||{},c=o.trackingId,u=o.imageId;k(e,n,void 0,Y(I,c,C.length,u,d,"PDP_FULL_SCREEN_IMAGE_GALLERY"))}}}),[k]),_=a.useMemo((function(){return{id:"HOT.HIS.PhotoGalleryTrigger",description:"Close review gallery dialog",callback:function(e,n){return k(e,n)}}}),[k]),S=a.useCallback((function(e){E<0?f(e):h(e)}),[E,h,f]);if(!(null===(n=C)||void 0===n?void 0:n.length))return null;var w={currentIndex:E>=0?I:y,onIndexChange:S,galleryName:"Dialog",analytics:T};return a.createElement(b.St,G({dialogShow:r,onDismiss:i,strictFullscreen:!0,analytics:_},P),a.createElement(b.$x,O(G({},w),{images:C,stretchToFill:!1})))};ie.displayName="MediaGalleryDialog",ie.fragment=re;var oe=function(e){var n,t=e.images,l=e.onImageSelected,r=e.columns,i=e.space,o=e.imagesRatio,c=e.focusIndex,u=e.containerRef,d=e.propertyId,g=e.categoryId;return(null===(n=t)||void 0===n?void 0:n.length)?a.createElement(_.EU,{bullet:"no-bullet",spacing:!1},a.createElement(I.PX,{columns:r,space:i},t.map((function(e,n){return a.createElement(I.UX,{key:n},a.createElement("div",{"data-stid":"image-thumbnail-view-with-label"},e.thumbnailClickAnalytics&&a.createElement(m.IntersectionTracker,{trackOnce:!0,referrerId:"HOT.HIS.ThumbnailImageImpression.".concat(g?"".concat(g,"."):"").concat(e.imageId,".").concat(n),linkName:"Thumbnail Image Impression",additionalUisPrimeMicroMessages:Y(n,e.trackingId,t.length,e.imageId,d,"PDP_FULL_IMAGE_GALLERY",g)},a.createElement(b.L0,O(G({},e),{index:n,imagesRatio:o,onImageSelected:function(){return l(n)},focusIndex:c,containerRef:u}))),!e.thumbnailClickAnalytics&&a.createElement(b.L0,O(G({},e),{index:n,imagesRatio:o,onImageSelected:function(){return l(n)},focusIndex:c,containerRef:u})),a.createElement(h.H3,{margin:{blockstart:"two",blockend:"three"}},a.createElement(P.sc,{align:"left",overflow:"truncate","aria-hidden":"true"},e.caption))))})))):null};oe.displayName="MediaGalleryThumbnailView";var ce=function(e){var n,t,l=e.categories,r=e.images,i=e.useCenteredSheet,o=e.onImageClick,c=e.categoryIndexState,d=e.imageIndexState,s=e.propertyId,v=e.showImageNumber,b=void 0!==v&&v,E=e.refGallery,_=e.isSmallView,S=L(d,1)[0],w=L(c,1)[0],x=a.useRef(null),G=a.useRef({}),O=a.useRef(null),D=(0,m.useClickTracker)(),M=2===(0,g.useExperiment)("PEXO_PDP_CenteredSheet_gallery_with_1_column_of_images").exposure.bucket?1:2,A=L(a.useState(w>=0||!(null===(n=l)||void 0===n?void 0:n.length)?w:0),2),H=A[0],N=A[1],V=L(a.useState([]),2),F=V[0],R=V[1];a.useEffect((function(){var e,n=new Array(null===(e=l)||void 0===e?void 0:e.length).fill(!1);n[0]=!n[0],R(n)}),[l]);var j=a.useCallback((function(e){var n,t,a,r,i,o;if(l){var c,u=e>=0?null===(c=l[e])||void 0===c?void 0:c.categoryId:"";D("HOT.HIS.PhotoGalleryTrigger.".concat(u,".").concat(e),"Selected gallery tab")}var d=new Array(F.length).fill(!1);d[e]=!0,R(d),N(e);var m=(null===(n=G.current[e])||void 0===n?void 0:n.offsetTop)||0,g=(null===(a=O.current)||void 0===a||null===(t=a.offsetParent)||void 0===t?void 0:t.clientHeight)||0;null===(o=E)||void 0===o||null===(i=o.current)||void 0===i||null===(r=i.offsetParent)||void 0===r||r.scrollTo(0,m-g)}),[N,l,D,F.length,E]),z=a.useCallback((function(e){if(H){var n,t,a,i,c,u,d=(null===(n=l)||void 0===n?void 0:n[H])||{},m=d.categoryId,g=d.images,v=void 0===g?[]:g,y=(null===(t=v[e])||void 0===t?void 0:t.analytics)||{},f=y.subjectId,p=y.trackingId,I=y.imageId,b=null===(i=v[e])||void 0===i||null===(a=i.image)||void 0===a?void 0:a.analytics,h=v.length;if(D("HOT.HIS.ClickThumbnailImage.".concat(m,".").concat(f,".").concat(e),"Launch Thumbnail Gallery From Image Click",void 0,Y(e,p,h,I,s,"PDP_FULL_IMAGE_GALLERY")),b)D(null===(c=b)||void 0===c?void 0:c.referrerId,null===(u=b)||void 0===u?void 0:u.linkName);o(e,H)}else{var E,k,C,P,T,_=(null===(E=r[e])||void 0===E?void 0:E.analytics)||{},S=_.subjectId,w=_.trackingId,x=_.imageId,G=null===(C=r[e])||void 0===C||null===(k=C.image)||void 0===k?void 0:k.analytics;if(D("HOT.HIS.ClickThumbnailImage.".concat(S,".").concat(e),"Launch Thumbnail Gallery From Image Click",void 0,Y(e,w,r.length,x,s,"PDP_FULL_IMAGE_GALLERY")),G)D(null===(P=G)||void 0===P?void 0:P.referrerId,null===(T=G)||void 0===T?void 0:T.linkName);o(e,H)}}),[H,o,l,D,r,s]),U=a.useCallback((function(e,n,t){return a.createElement(oe,{imagesRatio:p.zT.R16_9,images:e,onImageSelected:z,columns:n,space:"three",focusIndex:S,propertyId:s,categoryId:t})}),[z,S,s]),X=a.useCallback((function(e,n,t,l,r,o,c){var u,d=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],m=c===H,g=a.createElement(a.Fragment,null,n&&a.createElement(h.H3,{padding:{blockend:"three"}},a.createElement(P.If,{tag:o,size:r,id:"category-".concat(c)},a.createElement("div",{ref:(u=c,function(e){G.current[u]=e})},n))),U(e,l,t));if(m)return d||i?a.createElement(h.H3,{padding:{inline:"three",blockend:"three"}},a.createElement("div",null,g)):g}),[U,i,H]),B=a.useCallback((function(e,n,t,l){return a.createElement(u.Viewport,null,a.createElement(u.ViewSmall,null,X(e,n,t,1,4,"h4",l)),a.createElement(u.ViewMedium,null,X(e,n,t,M,3,"h3",l)),a.createElement(u.ViewLarge,null,X(e,n,t,M,3,"h3",l,!1)))}),[X,M]),$=a.useCallback((function(e,n){return B(K(e.images),e.categoryName,e.categoryId,n)}),[B]);if(!(null===(t=l)||void 0===t?void 0:t.length)||1===l.length)return B(K(r));var W=a.createElement(a.Fragment,null,a.createElement(f.Y8,{type:"sticky",position:{top:"zero",zindex:"layer1"},display:"block"},a.createElement(h.H3,{padding:{small:{block:"one",inline:"three"},medium:{block:"one",inline:"three"},large:i?{block:"three",inline:"three"}:{block:"three",inline:"unset"}}},a.createElement(T.LG,{layout:"fullwidth",paddedViewRow:!1,canvasTheme:"primary"},a.createElement("div",{ref:O},a.createElement(C.Z,{direction:"horizontal"},a.createElement(h.H3,{padding:{small:{block:"three"},medium:{block:"three"},large:{block:"one"}}},a.createElement(y.lu,null,l.map((function(e,n){var t,l,r,i=e.images.length,o=b?"".concat(null===(t=e)||void 0===t?void 0:t.categoryName," (").concat(i,")"):null===(l=e)||void 0===l?void 0:l.categoryName;return a.createElement(k.M3,{key:"thumbail-gallery-pill-".concat(n),id:"thumbail-gallery-pill-".concat(n),checked:F[n],onChange:function(){return j(n)},value:null===(r=e)||void 0===r?void 0:r.categoryName},o)}))))))))),_?a.createElement(I.PX,{blockSize:"85vb"},a.createElement(C.Z,{direction:"vertical"},l.map((function(e,n){return $(e,n)})))):l.map((function(e,n){return $(e,n)})));return i?a.createElement(a.Fragment,null,a.createElement("div",{ref:x}),a.createElement(f.Y8,{type:"sticky",position:{top:"zero",zindex:"layer2"},cloneElement:!0},W)):W},ue=function(e){var n,t,l=e.categories,r=e.images,i=e.useCenteredSheet,o=void 0!==i&&i,c=e.onImageClick,d=e.categoryIndexState,s=e.imageIndexState,v=e.propertyId,y=L(s,1)[0],I=L(d,1)[0],b=a.useRef(null),E=(0,m.useClickTracker)(),k=2===(0,g.useExperiment)("PEXO_PDP_CenteredSheet_gallery_with_1_column_of_images").exposure.bucket?1:2,C=L(a.useState(I>=0||!(null===(n=l)||void 0===n?void 0:n.length)?I:0),2),T=C[0],_=C[1],w=a.useCallback((function(e){var n;if(l){var t,a=e>=0?null===(t=l[e])||void 0===t?void 0:t.categoryId:"";E("HOT.HIS.PhotoGalleryTrigger.".concat(a,".").concat(e),"Selected gallery tab")}_(e),null===(n=b.current)||void 0===n||n.scrollIntoView({block:"nearest"})}),[_,l,E]),x=a.useCallback((function(e){if(T){var n,t,a,i,o,u,d=(null===(n=l)||void 0===n?void 0:n[T])||{},m=d.categoryId,g=d.images,s=void 0===g?[]:g,y=(null===(t=s[e])||void 0===t?void 0:t.analytics)||{},f=y.subjectId,p=y.trackingId,I=y.imageId,b=null===(i=s[e])||void 0===i||null===(a=i.image)||void 0===a?void 0:a.analytics,h=s.length;if(E("HOT.HIS.ClickThumbnailImage.".concat(m,".").concat(f,".").concat(e),"Launch Thumbnail Gallery From Image Click",void 0,Y(e,p,h,I,v,"PDP_FULL_IMAGE_GALLERY")),b)E(null===(o=b)||void 0===o?void 0:o.referrerId,null===(u=b)||void 0===u?void 0:u.linkName);c(e,T)}else{var k,C,P,_,S,w=(null===(k=r[e])||void 0===k?void 0:k.analytics)||{},x=w.subjectId,G=w.trackingId,O=w.imageId,D=null===(P=r[e])||void 0===P||null===(C=P.image)||void 0===C?void 0:C.analytics;if(E("HOT.HIS.ClickThumbnailImage.".concat(x,".").concat(e),"Launch Thumbnail Gallery From Image Click",void 0,Y(e,G,r.length,O,v,"PDP_FULL_IMAGE_GALLERY")),D)E(null===(_=D)||void 0===_?void 0:_.referrerId,null===(S=D)||void 0===S?void 0:S.linkName);c(e,T)}}),[T,c,l,E,r]),G=a.useCallback((function(e,n,t){return a.createElement(oe,{imagesRatio:p.zT.R16_9,images:e,onImageSelected:x,columns:n,space:"three",focusIndex:y,propertyId:v,categoryId:t})}),[x,y]),O=a.useCallback((function(e,n,t,l,r,i){var c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=a.createElement(a.Fragment,null,n&&a.createElement(h.H3,{padding:{blockend:"three"}},a.createElement(P.If,{tag:i,size:r},n)),G(e,l,t));return c||o?a.createElement(h.H3,{padding:{inline:"three",blockend:"three"}},a.createElement("div",null,u)):u}),[G,o]),D=a.useCallback((function(e,n,t){return a.createElement(u.Viewport,null,a.createElement(u.ViewSmall,null,O(e,n,t,1,4,"h4")),a.createElement(u.ViewMedium,null,O(e,n,t,k,3,"h3")),a.createElement(u.ViewLarge,null,O(e,n,t,k,3,"h3",!1)))}),[O]),M=a.useCallback((function(e){return D(K(e.images),e.categoryName,e.categoryId)}),[D,o]);if(!(null===(t=l)||void 0===t?void 0:t.length)||1===l.length)return D(K(r));var A=a.createElement(S.yR,{tabsType:S.Gd.NATURAL,selectedTab:T,onTabSelect:w},l.map((function(e){return a.createElement(S.XA,{key:"thumbail-gallery-tab-".concat(e.categoryId),id:e.categoryId,name:e.categoryName,targetURI:"#"},M(e))})));return o?a.createElement(a.Fragment,null,a.createElement("div",{ref:b}),a.createElement(f.Y8,{type:"sticky",position:{top:"zero",zindex:"layer2"},cloneElement:!0},A)):A},de=(0,l.Ps)(z(),ee.fragment),me=function(e){var n,t,l,r,i,c=e.data,d=e.allImages,s=e.isDialogOpen,v=e.onDialogDismiss,f=e.onImageClick,p=e.categoryIndexState,I=e.imageIndexState,b=e.triggerRef,k=e.propertyId,C=c.categorizedImages,P=c.thumbnailGalleryDialog,T=a.useRef(null);a.useEffect((function(){var e;null===(e=T.current)||void 0===e||e.scrollIntoView({block:"start"})}),[]);var _=(0,m.useClickTracker)(),S={id:"HOT.HIS.PhotoGalleryTrigger",description:"Close thumbnail gallery dialog",callback:function(e,n){return _(e,n)}},w=P&&a.createElement(E.tv,{navigationContent:{onClick:v,onClickAnalytics:S,navType:null===(t=P.toolbar)||void 0===t||null===(n=t.icon)||void 0===n?void 0:n.id,navIconLabel:null===(r=P.toolbar)||void 0===r||null===(l=r.icon)||void 0===l?void 0:l.description},toolbarTitle:(null===(i=P.toolbar)||void 0===i?void 0:i.title)||""}),x={returnFocusOnClose:!0,isVisible:s,triggerRef:b},D=(0,g.useExperiment)("PEXO_PDP_CenteredSheet_gallery_with_1_column_of_images").exposure,L=(0,g.useExperiment)("Introduce_pills_and_numbers_in_the_image_gallery").exposure,M=function(e){return a.createElement(g.Experiment,{name:"Introduce_pills_and_numbers_in_the_image_gallery"},a.createElement(g.ExperimentControl,null,a.createElement(ue,{categories:C,images:d,useCenteredSheet:0!==D.bucket,onImageClick:f,categoryIndexState:p,imageIndexState:I,propertyId:k})),a.createElement(g.ExperimentVariant,{bucket:1},a.createElement(ce,{categories:C,images:d,useCenteredSheet:0!==D.bucket,onImageClick:f,categoryIndexState:p,imageIndexState:I,propertyId:k,refGallery:T,isSmallView:e})),a.createElement(g.ExperimentVariant,{bucket:2},a.createElement(ce,{categories:C,images:d,useCenteredSheet:0!==D.bucket,onImageClick:f,categoryIndexState:p,imageIndexState:I,propertyId:k,showImageNumber:!0,refGallery:T,isSmallView:e})))},A=function(e){return a.createElement(a.Fragment,null,w,0===L.bucket?a.createElement(o.XM,{padded:!1},a.createElement("div",{ref:T},M(e))):a.createElement("div",{ref:T},M(e)))},H=a.createElement(o.A5,{type:"full",isVisible:s,triggerRef:b,returnFocusOnClose:!0},w,a.createElement(h.H3,{padding:{blockend:"three"}},a.createElement(o.XM,{padded:!1},a.createElement(y.lu,{justifyContent:"center"},a.createElement(y.Vt,{maxWidth:"312x",grow:1},a.createElement("div",{ref:T},M(!1)))))));return a.createElement(u.Viewport,null,a.createElement(u.ViewSmall,null,a.createElement(o.A5,O(G({},x),{type:"full"}),A(!0))),a.createElement(u.ViewMedium,null,a.createElement(g.Experiment,{name:"PEXO_PDP_CenteredSheet_gallery_with_1_column_of_images"},a.createElement(g.ExperimentControl,null,H),a.createElement(g.ExperimentVariant,{bucket:1},a.createElement(o.A5,O(G({},x),{type:"centered",height:1200}),A(!1))),a.createElement(g.ExperimentVariant,{bucket:2},a.createElement(o.A5,O(G({},x),{type:"centered",height:1200}),A(!1))))))};me.displayName="ThumbnailGalleryDialog",me.fragment=de;var ge=function(e,n){var t=function(e){return(0,a.useMemo)((function(){var n,t,a;return(null===(a=e)||void 0===a||null===(t=a.categorizedImages)||void 0===t||null===(n=t.find((function(n){return n.categoryId===e.categoryIdAll})))||void 0===n?void 0:n.images)||[]}),[e])}(e);return(0,a.useMemo)((function(){var e;if(!(null===(e=n)||void 0===e?void 0:e.length)||!t.length)return t;var a=n.reduce((function(e,n){return O(G({},e),x({},n.imageId,n))}),{}),l=t.filter((function(e){var n;return(null===(n=e.analytics)||void 0===n?void 0:n.imageId)&&Boolean(a[e.analytics.imageId])&&e.lowResImage})).map((function(e){var n,t,l,r;return O(G({},e),{image:O(G({},e.image),{url:(null===(n=a[(null===(t=e.analytics)||void 0===t?void 0:t.imageId)||""])||void 0===n?void 0:n.url)||e.image.url}),lowResImage:O(G({},e.lowResImage),{url:(null===(l=a[(null===(r=e.analytics)||void 0===r?void 0:r.imageId)||""])||void 0===l?void 0:l.url)||""})})}));l.sort((function(e,t){var a,l;return((null===(a=n)||void 0===a?void 0:a.findIndex((function(n){var t;return n.imageId===(null===(t=e.analytics)||void 0===t?void 0:t.imageId)})))||-1)-((null===(l=n)||void 0===l?void 0:l.findIndex((function(e){var n;return e.imageId===(null===(n=t.analytics)||void 0===n?void 0:n.imageId)})))||-1)}));var r=t.filter((function(e){var n,t;return!(null===(n=e.analytics)||void 0===n?void 0:n.imageId)||!e.lowResImage||!((null===(t=e.analytics)||void 0===t?void 0:t.imageId)in a)}));return A(l).concat(A(r))}),[t,n])},se=(0,l.Ps)(U(),le.fragment,te.fragment,ie.fragment,me.fragment),ve=function(e){var n,t,l,r,i,d,m=e.propertyId,g=e.data,s=e.placeholderData,v=e.className,y=L((0,c.useDialog)("media-gallery","pwaDialogNested"),3),f=y[0],p=y[1],I=y[2],b=L((0,c.useDialog)("thumbnail-gallery","pwaThumbnailDialog"),3),h=b[0],E=b[1],k=b[2],C=a.useRef(null),P=a.useRef(null),T=a.useState(0),_=a.useState(-1),S=a.useState(0),w=L(T,2)[1],x=L(_,2)[1],O=L(S,2)[1],D=ge(g,s),M=a.useCallback((function(e){w(e),x(-1),C.current=document.activeElement,E.openDialog()}),[E,x,w]),A=a.useCallback((function(e){window.open(e)}),[]),H=a.useCallback((function(){x(-1),E.openDialog()}),[E,x]),N=a.useCallback((function(e,n){P.current=document.activeElement,x(n),O(e),n<0&&w(e),p.openDialog()}),[x,O,p,w]),V=a.useCallback((function(){var e=document.activeElement;C.current=e,w(0),E.openDialog()}),[E,w]),F=a.useCallback((function(){E.closeDialog(),setTimeout((function(){var e;null===(e=C.current)||void 0===e||e.focus()}),0)}),[E]),R=a.useCallback((function(){p.closeDialog(),setTimeout((function(){var e;null===(e=P.current)||void 0===e||e.focus()}),0)}),[p]);if(!g||!D.length)return null;var j={imageIndexState:T,categoryImageIndexState:S,categoryIndexState:_},z=G({onTriggerClick:V,onVirtualTourClick:A,thumbnailDialogTriggerTitle:null===(l=g)||void 0===l||null===(t=l.thumbnailGalleryDialog)||void 0===t||null===(n=t.trigger)||void 0===n?void 0:n.value,thumbnailDialogTriggerAccessibilityLabel:null===(d=g)||void 0===d||null===(i=d.thumbnailGalleryDialog)||void 0===i||null===(r=i.trigger)||void 0===r?void 0:r.accessibilityLabel,data:g,propertyId:m,allImages:D},j);return a.createElement("div",{className:v},a.createElement(u.Viewport,null,a.createElement(u.ViewSmall,null,a.createElement(te,G({onImageClick:H},z))),a.createElement(u.ViewMedium,null,a.createElement(le,G({onImageClick:function(e){return M(e)},imagesToShow:3},z))),a.createElement(u.ViewLarge,null,a.createElement(le,G({onImageClick:function(e){return M(e)},imagesToShow:5},z)))),a.createElement(o.Xw,{isVisible:h},a.createElement(k,null,a.createElement(me,G({allImages:D,data:g,isDialogOpen:h,onDialogDismiss:F,onImageClick:N,triggerRef:C,propertyId:m},j)))),a.createElement(o.Xw,{isVisible:f},a.createElement(I,null,a.createElement(ie,G({allImages:D,data:g,isDialogOpen:f,onDialogDismiss:R,propertyId:m},j)))))};ve.displayName="ProductGalleryImageContainer",ve.fragment=se;var ye=function(e){var n=e.images,t=function(){var e=L((0,a.useState)(!1),2),n=e[0],t=e[1];return(0,a.useEffect)((function(){t(!0)}),[]),n}();return a.createElement(a.Fragment,null,t?a.createElement(Ie,{images:n}):a.createElement(be,{images:n}))},fe=function(e){var n,t,l=e.additionalImage,r=e.className,i=e.style;return a.createElement(p.A1,{ratio:p.zT.R16_9,className:r,style:i},a.createElement(p.xH,{placeholderImage:!0,src:null===(n=l)||void 0===n?void 0:n.url,alt:null===(t=l)||void 0===t?void 0:t.description}))},pe=function(e){var n=function(e){var n,t=e.images;return a.createElement(u.Viewport,null,a.createElement(u.ViewSmall,null,a.createElement(fe,{additionalImage:null===(n=t)||void 0===n?void 0:n[0]})),a.createElement(u.ViewMedium,null,a.createElement(I.PX,{rows:2,columns:3,space:"half"},Array.from(Array(3)).map((function(e,n){var l;return a.createElement(I.UX,{rowSpan:0===n?2:1,colSpan:0===n?2:1,key:"gallery-placeholder-".concat(n)},a.createElement(fe,{additionalImage:null===(l=t)||void 0===l?void 0:l[n]}))})))),a.createElement(u.ViewLarge,null,a.createElement(I.PX,{rows:2,columns:4,space:"half"},Array.from(Array(5)).map((function(e,n){var l;return a.createElement(I.UX,{rowSpan:0===n?2:1,colSpan:0===n?2:1,key:"gallery-placeholder-".concat(n)},a.createElement(fe,{additionalImage:null===(l=t)||void 0===l?void 0:l[n]}))})))))};return n.displayName=e,n},Ie=pe("CsrPlaceholder"),be=pe("SsrPlaceholder"),he=(0,l.Ps)(X(),ve.fragment),Ee=function(e){var n,t=e.inputs,l=e.skipSsr,o=e.placeholderData,c=e.batchKey,u=(0,i.v)().context,d=O(G({},t),{context:u}),m=(0,r.a)(he,{context:{batchKey:c},variables:d,ssr:!l,errorPolicy:"all"}),g=m.data,s=m.loading,v=null===(n=g)||void 0===n?void 0:n.productGallery;return a.createElement(a.Fragment,null,s&&a.createElement(ye,{images:o}),a.createElement(ve,{propertyId:t.productIdentifier.id,data:v,placeholderData:o}))};Ee.displayName="sharedui-ProductGallery"}}]);
//# sourceMappingURL=shared-ui-retail-product-gallery.83a72e0f4301c1dc2315.js.map